//ä½ è¿˜è®°å¾—é‚£æ¡é£é¡å…¨çƒçš„è´ªåƒè›‡å—ï¼Ÿ 
//
// æˆ‘ä»¬åœ¨ä¸€ä¸ª n*n çš„ç½‘æ ¼ä¸Šæ„å»ºäº†æ–°çš„è¿·å®«åœ°å›¾ï¼Œè›‡çš„é•¿åº¦ä¸º 2ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šå å»ä¸¤ä¸ªå•å…ƒæ ¼ã€‚è›‡ä¼šä»å·¦ä¸Šè§’ï¼ˆ(0, 0) å’Œ (0, 1)ï¼‰å¼€å§‹ç§»åŠ¨ã€‚æˆ‘ä»¬ç”¨
// 0 è¡¨ç¤ºç©ºå•å…ƒæ ¼ï¼Œç”¨ 1 è¡¨ç¤ºéšœç¢ç‰©ã€‚è›‡éœ€è¦ç§»åŠ¨åˆ°è¿·å®«çš„å³ä¸‹è§’ï¼ˆ(n-1, n-2) å’Œ (n-1, n-1)ï¼‰ã€‚ 
//
// æ¯æ¬¡ç§»åŠ¨ï¼Œè›‡å¯ä»¥è¿™æ ·èµ°ï¼š 
//
// 
// å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘å³ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚ 
// å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚ 
// å¦‚æœå®ƒå¤„äºæ°´å¹³çŠ¶æ€å¹¶ä¸”å…¶ä¸‹é¢çš„ä¸¤ä¸ªå•å…ƒéƒ½æ˜¯ç©ºçš„ï¼Œå°±é¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚è›‡ä»ï¼ˆ(r, c)ã€(r, c+1)ï¼‰ç§»åŠ¨åˆ° ï¼ˆ(r, c)ã€(r+1, c)ï¼‰ã€‚
// 
// å¦‚æœå®ƒå¤„äºç«–ç›´çŠ¶æ€å¹¶ä¸”å…¶å³é¢çš„ä¸¤ä¸ªå•å…ƒéƒ½æ˜¯ç©ºçš„ï¼Œå°±é€†æ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚è›‡ä»ï¼ˆ(r, c)ã€(r+1, c)ï¼‰ç§»åŠ¨åˆ°ï¼ˆ(r, c)ã€(r, c+1)ï¼‰ã€‚ 
//
// 
//
// è¿”å›è›‡æŠµè¾¾ç›®çš„åœ°æ‰€éœ€çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°ã€‚ 
//
// å¦‚æœæ— æ³•åˆ°è¾¾ç›®çš„åœ°ï¼Œè¯·è¿”å› -1ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//
// è¾“å…¥ï¼šgrid = [[0,0,0,0,0,1],
//               [1,1,0,0,1,0],
//Â               [0,0,0,0,1,1],
//Â               [0,0,1,0,1,0],
//Â               [0,1,1,0,0,0],
//Â               [0,1,1,0,0,0]]
//è¾“å‡ºï¼š11
//è§£é‡Šï¼š
//ä¸€ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆæ˜¯ [å³, å³, é¡ºæ—¶é’ˆæ—‹è½¬, å³, ä¸‹, ä¸‹, ä¸‹, ä¸‹, é€†æ—¶é’ˆæ—‹è½¬, å³, ä¸‹]ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼šgrid = [[0,0,1,1,1,1],
//Â               [0,0,0,0,1,1],
//Â               [1,1,0,0,0,1],
//Â               [1,1,1,0,0,1],
//Â               [1,1,1,0,0,1],
//Â               [1,1,1,0,0,0]]
//è¾“å‡ºï¼š9
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 2 <= n <= 100 
// 0 <= grid[i][j] <= 1 
// è›‡ä¿è¯ä»ç©ºå•å…ƒæ ¼å¼€å§‹å‡ºå‘ã€‚ 
// 
//
// Related Topics å¹¿åº¦ä¼˜å…ˆæœç´¢ æ•°ç»„ çŸ©é˜µ ğŸ‘ 66 ğŸ‘ 0


package com.jue.java.learn.leetcode.editor.cn.MinimumMovesToReachTargetWithRotations;

import java.util.ArrayDeque;
import java.util.Queue;

/**
 * @author JUE
 * @number 1210
 */
public class MinimumMovesToReachTargetWithRotations {
    public static void main(String[] args) {
        Solution solution = new Solution();
    }
}

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {

    public static final String[] POSITION = {"â†’", "â†“", "â†", "â†‘"};

    public int minimumMoves(int[][] grid) {
        // å¼€å§‹è·ç¦» [0,0][0,1]; æœ‰åºæ•°ç»„, å³è¾¹æ˜¯å¤´, æ—‹è½¬çš„æ—¶å€™å°¾éƒ¨ä¸åŠ¨ï¼Œå¤´éƒ¨æ¢ä½
        // åˆå§‹ä½ç½®æ˜¯ [0][1][0] = 0; å…¶ä»–ä½ç½®å¿…é¡»å¤§äºé›¶
        // int row = grid.length, col = grid[0].length;
        // é¢˜ç›®ç»™å®š n * n; ä¸ä¼šå‡ºç°row != colï¼Œ ä¸ä¼šå‡ºç°å‡ºå£ç­‰äºå…¥å£çš„æƒ…å†µã€‚
        int n = grid.length;
        // è®°å½•èµ°åˆ°å½“å‰çŠ¶æ€éœ€è¦çš„æ­¥æ•°, å°¾å·´æœ‰å·¦ä¸Šå³ä¸‹å››ä¸ªæ–¹å‘[0,1,2,3]æ¯ä¸ªè®°å½•ä¸ºä¸åŒçš„æ–¹å‘
        int[][][] countMove = new int[n][n][4];
        // å››ä¸ªæ–¹å‘å°è¯•èµ°è¿‡, ç­‰äº0æ—¶å†™å…¥, æ³¨æ„: æˆ‘ä»¬ä½¿ç”¨å¹¿åº¦éå†çš„æ–¹å¼, å…ˆå…¥å…ˆå‡º, è¿™æ ·åªè¦å†™è¿‡æ•°æ®ä¾¿æ˜¯æœ€çŸ­çš„
        Queue<int[]> queue = new ArrayDeque<>();
        // row, col, end, count
        queue.add(new int[]{0, 1, 0, 0});
        while (!queue.isEmpty()) {
            int[] current = queue.poll();
            int row = current[0], col = current[1], end = current[2], count = current[3];
            System.out.printf("[%s,%s]: %s; %s%n", row, col, POSITION[end], count);
            // é—®é¢˜: ä¼šå€’é€€ä¸€æ­¥å—? æš‚å®šä¸è®¡ç®—å€’é€€ä¸€æ­¥; æš‚å®šå¤´å’Œå°¾å¯ä»¥åŒæ—¶å‚ç›´å¹³ç§»
            // åˆ é™¤äº†å‘å·¦å’Œå‘ä¸Šçš„å¤„ç†
            // å››ä¸ªä½ç½®å±•å¼€
            switch (end) {
                case 0:
                    // å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘å³ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚
                    if (col < n - 1 && grid[row][col + 1] == 0) {
                        // System.out.printf("next [%s,%s]: %s; %s%n", row, col + 1, POSITION[end], countMove[row][col + 1][end]);
                        push(queue, countMove, row, col + 1, end, count);
                    }
                    // å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚
                    if (row < n - 1 && grid[row + 1][col] == 0 && grid[row + 1][col - 1] == 0) {
                        push(queue, countMove, row + 1, col, end, count);
                    }
                    // å¦‚æœå®ƒå¤„äºæ°´å¹³çŠ¶æ€å¹¶ä¸”å…¶ä¸‹é¢çš„ä¸¤ä¸ªå•å…ƒéƒ½æ˜¯ç©ºçš„ï¼Œå°±é¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚è›‡ä»ï¼ˆ(r, c)ã€(r, c+1)ï¼‰ç§»åŠ¨åˆ° ï¼ˆ(r, c)ã€(r+1, c)ï¼‰ã€‚
                    if (row < n - 1 && grid[row + 1][col] == 0 && grid[row + 1][col - 1] == 0) {
                        push(queue, countMove, row + 1, col - 1, 1, count);
                    }
                    break;
                case 1:
                    // å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚
                    if (row < n - 1 && grid[row + 1][col] == 0) {
                        push(queue, countMove, row + 1, col, end, count);
                    }
                    // å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘å³ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚
                    if (col < n - 1 && grid[row][col + 1] == 0 && grid[row - 1][col + 1] == 0) {
                        push(queue, countMove, row, col + 1, end, count);
                    }
                    // å¦‚æœå®ƒå¤„äºç«–ç›´çŠ¶æ€å¹¶ä¸”å…¶å³é¢çš„ä¸¤ä¸ªå•å…ƒéƒ½æ˜¯ç©ºçš„ï¼Œå°±é€†æ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚è›‡ä»ï¼ˆ(r, c)ã€(r+1, c)ï¼‰ç§»åŠ¨åˆ°ï¼ˆ(r, c)ã€(r, c+1)ï¼‰ã€‚
                    if (col < n - 1 && grid[row][col + 1] == 0 && grid[row - 1][col + 1] == 0) {
                        push(queue, countMove, row - 1, col + 1, 0, count);
                    }
                    break;
                case 2:
                    // å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚
                    if (row < n - 1 && grid[row + 1][col] == 0 && grid[row + 1][col + 1] == 0) {
                        push(queue, countMove, row + 1, col, end, count);
                    }
                    break;
                case 3:
                    // å¦‚æœæ²¡æœ‰éšœç¢ï¼Œåˆ™å‘å³ç§»åŠ¨ä¸€ä¸ªå•å…ƒæ ¼ã€‚å¹¶ä»ç„¶ä¿æŒèº«ä½“çš„æ°´å¹³ï¼ç«–ç›´çŠ¶æ€ã€‚
                    if (col < n - 1 && grid[row][col + 1] == 0 && grid[row + 1][col + 1] == 0) {
                        push(queue, countMove, row, col + 1, end, count);
                    }
                    // å¦‚æœå®ƒå¤„äºç«–ç›´çŠ¶æ€å¹¶ä¸”å…¶`å·¦`é¢çš„ä¸¤ä¸ªå•å…ƒéƒ½æ˜¯ç©ºçš„ï¼Œå°±é€†æ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚è›‡ä»ï¼ˆ(r, c)ã€(r+1, c)ï¼‰ç§»åŠ¨åˆ°ï¼ˆ(r, c)ã€(r, c+1)ï¼‰ã€‚
                    if (col > 0 && grid[row][col - 1] == 0 && grid[row + 1][col - 1] == 0) {
                        push(queue, countMove, row + 1, col - 1, 2, count);
                    }
                    break;
                default:
                    break;
            }
        }
        // ç§»åŠ¨åˆ° (n-1, n-2) å’Œ (n-1, n-1) count[n-1][n-1][0];
        int result = countMove[n - 1][n - 1][0];
        return result == 0 ? -1 : result;
    }

    public void push(Queue<int[]> queue, int[][][] countMove, int row, int col, int end, int count) {
        if (countMove[row][col][end] == 0) {
            if (row == 0 && col == 1 && end == 0) {
                countMove[0][1][0] = 1; // é¦–ä½æ˜¯ç‰¹ä¾‹!
            } else {
                countMove[row][col][end] = count + 1;
            }
            queue.add(new int[]{row, col, end, count + 1});
        }
    }
}
//leetcode submit region end(Prohibit modification and deletion)
